### **1. 生成 RSA 密钥（4096 位，推荐强度）**

bash

```
ssh-keygen -t rsa -b 4096 -C "your@email.com" -f ~/.ssh/gitlab_rsa -N ""
```

**参数说明**：

|参数|含义|
|---|---|
|-t rsa|类型：RSA|
|-b 4096|密钥长度：4096 位（安全）|
|-C "xxx"|注释：你的邮箱|
|-f ~/.ssh/gitlab_rsa|文件名：gitlab_rsa（私钥）+ .pub（公钥）|
|-N ""|空密码（免输密码）|

---

### **2. 查看公钥（复制这行！）**

bash

```
cat ~/.ssh/gitlab_rsa.pub
```

**输出示例**：

text

```
ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAACAQD... your@email.com
```

**全选 → 复制**

---

### **3. 粘贴到 GitLab Web**

1. 浏览器打开： http://172.31.179.162:8929
2. 右上角头像 → **Preferences → SSH Keys**
3. 粘贴公钥 → **Add key**

---

### **4. 测试连接（终极验证）**

bash

```
ssh -T -i ~/.ssh/gitlab_rsa git@172.31.179.162 -p 2224
```

**成功输出**：

text

```
Welcome to GitLab, @your-username!
```

---

### **可选：免输 -i 和 -p（配置 ~/.ssh/config）**

bash

```
cat >> ~/.ssh/config << EOF
Host gitlab
  HostName 172.31.179.162
  Port 2224
  User git
  IdentityFile ~/.ssh/gitlab_rsa
EOF
```

以后：

bash

```
ssh -T gitlab        # 自动走 2224 + 用密钥
git clone gitlab:root/test.git
``` 